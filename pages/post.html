<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Post a Task - GetItDone</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/styles/styles.css">
</head>
<body>
    <!-- Fiverr-Style Header -->
    <header class="fiverr-header">
        <!-- Top Section -->
        <div class="header-top">
            <div class="container">
                <div class="header-content">
                    <!-- Logo -->
                    <div class="header-logo">
                        <a href="index.html" class="logo-link">
                            <i class="bi bi-check-circle-fill me-2"></i>
                            <span class="logo-text">GetItDone</span>
                        </a>
                    </div>
                    
                    <!-- Search Bar -->
                    <div class="header-search">
                        <div class="search-container">
                            <input type="text" class="search-input" placeholder="What task are you looking for today?" id="header-search-input">
                            <button class="search-button" onclick="performSearch()">
                                <i class="bi bi-search"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Right Actions -->
                    <div class="header-actions">
                        <!-- Not Logged In -->
                        <div id="guest-actions">
                            <a href="#" class="action-link" onclick="showLoginModal()">Login</a>
                            <a href="#" class="action-link" onclick="showRegisterModal()">Join</a>
                        </div>
                        
                        <!-- Logged In User -->
                        <div id="user-actions" style="display: none;">
                            <!-- Notifications -->
                            <div class="action-icon position-relative" onclick="showNotifications()">
                                <i class="bi bi-bell"></i>
                                <span class="notification-badge" id="header-notification-badge" style="display: none;">0</span>
                            </div>
                            
                            <!-- Messages -->
                            <div class="action-icon position-relative" onclick="openMessagesModal()">
                                <i class="bi bi-envelope"></i>
                                <span class="notification-badge" id="header-message-badge" style="display: none;">0</span>
                            </div>
                            
                            <!-- Orders/Tasks -->
                            <a href="my-stuff.html" class="action-link">My Tasks</a>
                            <a href="my-stuff.html" class="action-icon mobile-only" title="My Tasks">
                                <i class="bi bi-briefcase"></i>
                            </a>
                            
                            <!-- User Profile -->
                            <div class="user-profile" id="header-user-profile">
                                <div class="profile-avatar-header" onclick="toggleProfileDropdown()">
                                    <span class="profile-initial" id="profile-initial">U</span>
                                    <div class="online-indicator"></div>
                                </div>
                                
                                <!-- Profile Dropdown -->
                                <div class="profile-dropdown" id="profile-dropdown">
                                    <div class="dropdown-header">
                                        <div class="dropdown-user-info">
                                            <div class="dropdown-avatar">
                                                <span class="dropdown-initial" id="dropdown-initial">U</span>
                                            </div>
                                            <div class="dropdown-details">
                                                <div class="dropdown-name" id="dropdown-name">User Name</div>
                                                <div class="dropdown-email" id="dropdown-email">user@email.com</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="dropdown-divider"></div>
                                    <a href="account.html" class="dropdown-item">
                                        <i class="bi bi-person-circle"></i>
                                        <span>My Profile</span>
                                    </a>
                                    <a href="my-stuff.html" class="dropdown-item">
                                        <i class="bi bi-briefcase"></i>
                                        <span>My Tasks</span>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a href="rules.html" class="dropdown-item">
                                        <i class="bi bi-shield-check"></i>
                                        <span>Rules & Safety</span>
                                    </a>
                                    <a href="about.html" class="dropdown-item">
                                        <i class="bi bi-info-circle"></i>
                                        <span>About</span>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a href="#" class="dropdown-item" onclick="logout()">
                                        <i class="bi bi-box-arrow-right"></i>
                                        <span>Logout</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container py-4">
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Post a Task</li>
            </ol>
        </nav>

        <div class="row justify-content-center">
            <div class="col-lg-8">
                <!-- Header -->
                <div class="text-center mb-5">
                    <h1 class="display-5 fw-bold mb-3">Post a Task</h1>
                    <p class="lead text-muted">Describe what you need help with and find someone nearby to get it done.</p>
                </div>

                <!-- Post Task Form -->
                <div class="card position-relative" id="post-task-card">
                    <!-- Login Overlay for Guests -->
                    <div id="login-overlay" class="position-absolute w-100 h-100 d-flex align-items-center justify-content-center" 
                         style="background: rgba(0,0,0,0.8); z-index: 10; border-radius: 0.375rem; display: none;">
                        <div class="text-center text-white p-4">
                            <i class="bi bi-shield-exclamation display-1 mb-3"></i>
                            <h3 class="mb-3">Account Required</h3>
                            <p class="fs-5 mb-4">Please log in or create an account to post a task</p>
                            <div class="d-flex gap-3 justify-content-center">
                                <button class="btn btn-danger btn-lg" onclick="showLoginModal()">
                                    <i class="bi bi-box-arrow-in-right me-2"></i>Login
                                </button>
                                <button class="btn btn-outline-light btn-lg" onclick="showRegisterModal()">
                                    <i class="bi bi-person-plus me-2"></i>Sign Up
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card-body p-4">
                        <form id="post-task-form">
                            <!-- Task Title -->
                            <div class="mb-4">
                                <label for="task-title" class="form-label fw-bold">Task Title *</label>
                                <input type="text" class="form-control" id="task-title" name="title" 
                                    placeholder="e.g., Help assemble futon" required>
                                <div class="form-text">Be specific and clear about what you need help with.</div>
                            </div>

                            <!-- Task Description -->
                            <div class="mb-4">
                                <label for="task-description" class="form-label fw-bold">Description *</label>
                                <textarea class="form-control" id="task-description" name="description" rows="4" 
                                    placeholder="Provide details about the task, what to bring, requirements, etc." required></textarea>
                                <div class="form-text">Include any special requirements, tools needed, or important details.</div>
                            </div>

                            <!-- Pay Information -->
                            <div class="row mb-4">
                                <div class="col-md-4">
                                    <label for="pay-type" class="form-label fw-bold">Pay Type *</label>
                                    <select class="form-select" id="pay-type" name="payType" required>
                                        <option value="">Select pay type</option>
                                        <option value="flat">Flat Rate</option>
                                        <option value="hour">Per Hour</option>
                                    </select>
                                </div>
                                <div class="col-md-4">
                                    <label for="pay-amount" class="form-label fw-bold">Pay Amount *</label>
                                    <div class="input-group">
                                        <span class="input-group-text">$</span>
                                        <input type="number" class="form-control" id="pay-amount" name="payAmount" 
                                            min="0" step="0.01" placeholder="0.00" required>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <label for="payment-method" class="form-label fw-bold">Payment Method *</label>
                                    <select class="form-select" id="payment-method" name="paymentMethod" required>
                                        <option value="">Select payment method</option>
                                        <option value="online">Online Payment</option>
                                        <option value="cash">Cash (In-Person)</option>
                                    </select>
                                    <div class="form-text">
                                        <small>
                                            <strong>Online:</strong> Secure payment through platform<br>
                                            <strong>Cash:</strong> Pay helper directly when task is completed
                                        </small>
                                    </div>
                                </div>
                            </div>

                            <!-- Payment Information Display -->
                            <div class="alert alert-info" id="payment-info" style="display: none;">
                                <h6><i class="bi bi-info-circle me-2"></i>Payment Breakdown</h6>
                                <div id="payment-breakdown"></div>
                                <small class="text-muted">Platform fee (5%) helps us maintain the service and ensure safety.</small>
                            </div>

                            <!-- Online Payment Card Info (shown when online payment is selected) -->
                            <div id="online-payment-section" style="display: none;">
                                <h5 class="fw-bold mb-3">Payment Card Information</h5>
                                <div class="row mb-3">
                                    <div class="col-md-8">
                                        <label for="payment-card-number" class="form-label">Card Number *</label>
                                        <input type="text" class="form-control" id="payment-card-number" name="paymentCardNumber" 
                                            placeholder="1234 5678 9012 3456" maxlength="19">
                                    </div>
                                    <div class="col-md-4">
                                        <label for="payment-card-cvv" class="form-label">CVV *</label>
                                        <input type="text" class="form-control" id="payment-card-cvv" name="paymentCardCvv" 
                                            placeholder="123" maxlength="4">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="payment-card-expiry" class="form-label">Expiry Date *</label>
                                        <input type="text" class="form-control" id="payment-card-expiry" name="paymentCardExpiry" 
                                            placeholder="MM/YY" maxlength="5">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="payment-card-name" class="form-label">Name on Card *</label>
                                        <input type="text" class="form-control" id="payment-card-name" name="paymentCardName" 
                                            placeholder="John Doe">
                                    </div>
                                </div>
                                <div class="alert alert-warning">
                                    <small>
                                        <i class="bi bi-shield-check me-1"></i>
                                        Your payment will be processed securely. The full amount will be charged to your card, 
                                        and the helper will receive their payment after task completion.
                                    </small>
                                </div>
                            </div>

                            <!-- Date and Time -->
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <label for="task-date" class="form-label fw-bold">Date *</label>
                                    <input type="date" class="form-control" id="task-date" name="date" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="time-window" class="form-label fw-bold">Time Window *</label>
                                    <select class="form-select" id="time-window" name="timeWindow" required>
                                        <option value="">Select time window</option>
                                        <option value="Early Morning (6:00 AM - 9:00 AM)">Early Morning (6:00 AM - 9:00 AM)</option>
                                        <option value="Morning (9:00 AM - 12:00 PM)">Morning (9:00 AM - 12:00 PM)</option>
                                        <option value="Afternoon (12:00 PM - 3:00 PM)">Afternoon (12:00 PM - 3:00 PM)</option>
                                        <option value="Late Afternoon (3:00 PM - 6:00 PM)">Late Afternoon (3:00 PM - 6:00 PM)</option>
                                        <option value="Evening (6:00 PM - 9:00 PM)">Evening (6:00 PM - 9:00 PM)</option>
                                        <option value="Night (9:00 PM - 12:00 AM)">Night (9:00 PM - 12:00 AM)</option>
                                        <option value="Late Night (12:00 AM - 6:00 AM)">Late Night (12:00 AM - 6:00 AM)</option>
                                        <option value="Flexible - Any Time">Flexible - Any Time</option>
                                        <option value="Custom">Custom (specify in description)</option>
                                    </select>
                                </div>
                            </div>

                            <!-- Job Type -->
                            <div class="mb-4">
                                <h5 class="fw-bold mb-3">Job Type</h5>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="jobType" id="job-type-local" value="local" checked>
                                            <label class="form-check-label" for="job-type-local">
                                                <i class="bi bi-geo-alt me-2"></i>Local Job
                                                <small class="d-block text-muted">Requires in-person work</small>
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="jobType" id="job-type-remote" value="remote">
                                            <label class="form-check-label" for="job-type-remote">
                                                <i class="bi bi-laptop me-2"></i>Remote Job
                                                <small class="d-block text-muted">Can be done online/from home</small>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Location Information -->
                            <div class="mb-4" id="location-section">
                                <h5 class="fw-bold mb-3">Location Information</h5>
                                
                                <!-- Local Job Location Details -->
                                <div id="local-location-details">
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="college" class="form-label fw-bold">College/University</label>
                                            <select class="form-select" id="college" name="college">
                                                <option value="">Select college (optional)</option>
                                            </select>
                                            <div class="form-text">Helps students find jobs at their school</div>
                                        </div>
                                <div class="col-md-6">
                                    <label for="location-type" class="form-label fw-bold">Location Type *</label>
                                    <select class="form-select" id="location-type" name="locationType" required>
                                        <option value="">Select location type</option>
                                                <option value="Campus">Campus</option>
                                                <option value="Apartment">Apartment</option>
                                                <option value="House">House</option>
                                                <option value="Business">Business</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="location-name" class="form-label fw-bold">Specific Location *</label>
                                            <input type="text" class="form-control" id="location-name" name="locationName" 
                                                placeholder="e.g., Student Center, Lakeside Apartments" required>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="address" class="form-label fw-bold">Address *</label>
                                            <div class="address-input-container">
                                                <input type="text" class="form-control" id="address" name="address" 
                                                    placeholder="Start typing an address..." required autocomplete="off">
                                                <div id="address-suggestions" class="address-suggestions"></div>
                                            </div>
                                            <div class="form-text">Full address for the job location</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Remote Job Details -->
                                <div id="remote-location-details" style="display: none;">
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="college-remote" class="form-label fw-bold">College/University</label>
                                            <select class="form-select" id="college-remote" name="college">
                                                <option value="">Select college (optional)</option>
                                            </select>
                                            <div class="form-text">Helps students find remote jobs from their school</div>
                                        </div>
                                        <div class="col-md-6">
                                            <label for="remote-location-type" class="form-label fw-bold">Remote Type *</label>
                                            <select class="form-select" id="remote-location-type" name="locationType">
                                                <option value="Remote">Remote Work</option>
                                                <option value="Video Call">Video Call</option>
                                                <option value="Phone Call">Phone Call</option>
                                                <option value="Online Platform">Online Platform</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <label for="remote-location-name" class="form-label fw-bold">Platform/Details *</label>
                                            <input type="text" class="form-control" id="remote-location-name" name="remoteLocationName" 
                                                placeholder="e.g., Zoom, Google Meet, Phone" required>
                                </div>
                                <div class="col-md-6">
                                            <label for="address-remote" class="form-label fw-bold">Address</label>
                                            <input type="text" class="form-control" id="address-remote" name="address" 
                                                value="Remote" readonly>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Categories/Tags -->
                            <div class="mb-4">
                                <label class="form-label fw-bold">Categories *</label>
                                <div class="mb-3">
                                    <div class="form-text mb-2">Select relevant categories:</div>
                                    <div id="tag-checkboxes" class="row">
                                        <!-- Populated by JavaScript -->
                                    </div>
                                </div>
                                
                                <!-- Custom Tags -->
                                <div class="mb-3">
                                    <label for="task-tags-input" class="form-label">Add Custom Tags (Optional)</label>
                                    <input type="text" class="form-control" id="task-tags-input" 
                                        placeholder="Type a tag and press Enter">
                                    <div class="form-text">Press Enter to add custom tags</div>
                                </div>
                                
                                <!-- Selected Tags Display -->
                                <div id="selected-tags" class="mb-3">
                                    <!-- Selected tags will appear here -->
                                </div>
                            </div>

                            <!-- User Information Notice -->
                            <!-- Login Prompt for Guests -->
                <div class="mb-4" id="login-prompt-section" style="display: none;">
                    <div class="alert alert-danger border-0 shadow-lg" style="border-left: 6px solid #dc3545 !important;">
                        <div class="d-flex align-items-start">
                            <div class="me-3">
                                <i class="bi bi-shield-exclamation fs-1 text-danger"></i>
                            </div>
                            <div class="flex-grow-1">
                                <h4 class="alert-heading text-danger mb-3">
                                    <i class="bi bi-lock-fill me-2"></i>Account Required to Post Tasks
                                </h4>
                                <p class="fs-5 mb-3 text-dark">
                                    <strong>You must be logged in to post a task.</strong> This ensures accountability and helps maintain a safe community for all users.
                                </p>
                                <div class="bg-light p-3 rounded mb-3">
                                    <h6 class="text-primary mb-2">
                                        <i class="bi bi-info-circle me-1"></i>Why do I need an account?
                                    </h6>
                                    <ul class="mb-0 text-muted">
                                        <li>Your name and email will be automatically used from your account</li>
                                        <li>Helps other users verify your identity and trustworthiness</li>
                                        <li>Enables communication between task posters and applicants</li>
                                        <li>Allows you to track your posted tasks and applications</li>
                                    </ul>
                                </div>
                                <div class="d-flex gap-3">
                                    <button class="btn btn-danger btn-lg px-4" onclick="showLoginModal()">
                                        <i class="bi bi-box-arrow-in-right me-2"></i>Login to Continue
                                    </button>
                                    <button class="btn btn-outline-danger btn-lg px-4" onclick="showRegisterModal()">
                                        <i class="bi bi-person-plus me-2"></i>Create Account
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                            <!-- User Info for Logged In Users -->
                            <div class="mb-4" id="user-info-section" style="display: none;">
                                <div class="alert alert-success">
                                    <i class="bi bi-check-circle me-2"></i>
                                    <strong>Logged in as:</strong> <span id="user-info-notice">Please log in to post a task.</span>
                                </div>
                            </div>

                            <!-- Safety Agreement -->
                            <div class="mb-4">
                                <div class="card bg-light">
                                    <div class="card-body">
                                        <h6 class="card-title fw-bold text-primary">
                                            <i class="bi bi-shield-check me-2"></i>Safety Guidelines
                                        </h6>
                                        <ul class="list-unstyled mb-3">
                                            <li class="mb-2">
                                                <i class="bi bi-check-circle text-success me-2"></i>
                                                Meet in public spaces only
                                            </li>
                                            <li class="mb-2">
                                                <i class="bi bi-check-circle text-success me-2"></i>
                                                No academic dishonesty or graded work
                                            </li>
                                            <li class="mb-2">
                                                <i class="bi bi-check-circle text-success me-2"></i>
                                                Payment after completion
                                            </li>
                                            <li class="mb-2">
                                                <i class="bi bi-check-circle text-success me-2"></i>
                                                Follow campus policies
                                            </li>
                                        </ul>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="safety-agreement" required>
                                            <label class="form-check-label" for="safety-agreement">
                                                I agree to follow these safety guidelines and understand this is a student project *
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Submit Buttons -->
                            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                                <a href="browse.html" class="btn btn-outline-secondary me-md-2">Cancel</a>
                                <button type="submit" class="btn btn-primary btn-lg" id="post-task-button" onclick="handlePostTaskClick(event)">
                                    <i class="bi bi-plus-circle me-2"></i>Post Task
                                </button>
                            </div>
                            
                            
                            
                            
                        </form>
                    </div>
                </div>

                <!-- Tips Section -->
                <div class="card mt-4">
                    <div class="card-body">
                        <h5 class="card-title text-primary">
                            <i class="bi bi-lightbulb me-2"></i>Tips for a Great Task Post
                        </h5>
                        <div class="row">
                            <div class="col-md-6">
                                <ul class="list-unstyled">
                                    <li class="mb-2">
                                        <i class="bi bi-check text-success me-2"></i>
                                        Be specific about what you need
                                    </li>
                                    <li class="mb-2">
                                        <i class="bi bi-check text-success me-2"></i>
                                        Include all necessary details
                                    </li>
                                    <li class="mb-2">
                                        <i class="bi bi-check text-success me-2"></i>
                                        Set a fair price for the work
                                    </li>
                                </ul>
                            </div>
                            <div class="col-md-6">
                                <ul class="list-unstyled">
                                    <li class="mb-2">
                                        <i class="bi bi-check text-success me-2"></i>
                                        Choose a convenient time
                                    </li>
                                    <li class="mb-2">
                                        <i class="bi bi-check text-success me-2"></i>
                                        Pick a public meeting location
                                    </li>
                                    <li class="mb-2">
                                        <i class="bi bi-check text-success me-2"></i>
                                        Use relevant categories
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-dark text-light py-5 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <div class="d-flex align-items-center mb-3">
                        <i class="bi bi-check-circle-fill text-primary me-2 fs-4"></i>
                        <h5 class="mb-0 fw-bold">GetItDone</h5>
                </div>
                    <p class="text-muted mb-3">Connecting students with tasks that need to be done. A platform built by students, for students.</p>
                    <div class="d-flex gap-3">
                    </div>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="fw-bold mb-3 text-primary">Platform</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="browse.html" class="text-white text-decoration-none">Browse Tasks</a></li>
                        <li class="mb-2"><a href="post.html" class="text-white text-decoration-none">Post a Task</a></li>
                        <li class="mb-2"><a href="my-stuff.html" class="text-white text-decoration-none">My Stuff</a></li>
                        <li class="mb-2"><a href="account.html" class="text-white text-decoration-none">Account</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="fw-bold mb-3 text-primary">Support</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="rules.html" class="text-white text-decoration-none">Rules & Safety</a></li>
                        <li class="mb-2"><a href="about.html" class="text-white text-decoration-none">About Us</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Help Center</a></li>
                        <li class="mb-2"><a href="#" class="text-white text-decoration-none">Contact Support</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="fw-bold mb-3 text-primary">Legal</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="rules.html#privacy-policy" class="text-white text-decoration-none">Privacy Policy</a></li>
                        <li class="mb-2"><a href="rules.html#terms-of-service" class="text-white text-decoration-none">Terms of Service</a></li>
                        <li class="mb-2"><a href="rules.html#cookie-policy" class="text-white text-decoration-none">Cookie Policy</a></li>
                        <li class="mb-2"><a href="rules.html#community-guidelines" class="text-white text-decoration-none">Community Guidelines</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-md-6 mb-4">
                    <h6 class="fw-bold mb-3 text-primary">Contact</h6>
                    <ul class="list-unstyled">
                        <li class="mb-2 text-white">
                            <i class="bi bi-envelope me-2"></i>
                            <a href="mailto:support@getitdone.com" class="text-white text-decoration-none">support@getitdone.com</a>
                        </li>
                        <li class="mb-2 text-white">
                            <i class="bi bi-telephone me-2"></i>
                            <a href="tel:+15551234567" class="text-white text-decoration-none">(555) 123-4567</a>
                        </li>
                        <li class="mb-2 text-white">
                            <i class="bi bi-geo-alt me-2"></i>
                            <span>University of Alabama<br>Tuscaloosa, AL 35401</span>
                        </li>
                    </ul>
                </div>
            </div>
            <hr class="my-4 border-secondary">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="text-white mb-0">&copy; 2024 GetItDone. All rights reserved. Student project for educational purposes.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="text-white mb-0">
                        <i class="bi bi-shield-check me-1"></i>
                        Secure & Trusted Platform
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../assets/scripts/data.js"></script>
    <script src="../assets/scripts/app.js"></script>
    <script>
        // Payment calculation and display
        function updatePaymentBreakdown() {
            const payAmount = parseFloat(document.getElementById('pay-amount').value) || 0;
            const paymentMethod = document.getElementById('payment-method').value;
            const paymentInfo = document.getElementById('payment-info');
            const paymentBreakdown = document.getElementById('payment-breakdown');
            const onlinePaymentSection = document.getElementById('online-payment-section');
            
            // Show/hide online payment section
            if (paymentMethod === 'online') {
                onlinePaymentSection.style.display = 'block';
            } else {
                onlinePaymentSection.style.display = 'none';
            }
            
            if (payAmount > 0 && paymentMethod) {
                const platformFee = Math.round(payAmount * 0.05 * 100) / 100;
                const helperPayment = Math.round((payAmount - platformFee) * 100) / 100;
                
                paymentBreakdown.innerHTML = `
                    <div class="row">
                        <div class="col-6">Total Amount:</div>
                        <div class="col-6 text-end"><strong>$${payAmount.toFixed(2)}</strong></div>
                    </div>
                    <div class="row">
                        <div class="col-6">Platform Fee (5%):</div>
                        <div class="col-6 text-end">$${platformFee.toFixed(2)}</div>
                    </div>
                    <div class="row border-top pt-2 mt-2">
                        <div class="col-6"><strong>Helper Receives:</strong></div>
                        <div class="col-6 text-end"><strong class="text-success">$${helperPayment.toFixed(2)}</strong></div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-12">
                            <small class="text-muted">
                                ${paymentMethod === 'online' ? 
                                    'Payment will be processed securely through our platform.' : 
                                    'You will pay the helper directly when the task is completed.'}
                            </small>
                        </div>
                    </div>
                `;
                paymentInfo.style.display = 'block';
            } else {
                paymentInfo.style.display = 'none';
            }
        }

        // Additional functions for post page
        function removeTag(tag) {
            // Remove from selected tags
            const selectedTagsContainer = document.getElementById('selected-tags');
            const tagElements = selectedTagsContainer.querySelectorAll('.tag-badge');
            tagElements.forEach(element => {
                if (element.textContent.includes(`#${tag}`)) {
                    element.remove();
                }
            });

            // Uncheck the corresponding checkbox
            const checkbox = document.getElementById(`checkbox-${tag}`);
            if (checkbox) {
                checkbox.checked = false;
            }
        }


        // Fix login state function
        function fixLoginState() {
            // Check current state
            const currentUser = localStorage.getItem('getitdone_current_user');
            
            if (currentUser) {
                // User is logged in - hide disclaimer, show user info
                const loginPrompt = document.getElementById('login-prompt-section');
                const userInfo = document.getElementById('user-info-section');
                const overlay = document.getElementById('login-overlay');
                
                if (loginPrompt) {
                    loginPrompt.style.display = 'none';
                }
                if (userInfo) {
                    userInfo.style.display = 'block';
                }
                if (overlay) {
                    overlay.style.display = 'none';
                }
                
                // Enable form
                const form = document.getElementById('post-task-form');
                const submitButton = form?.querySelector('button[type="submit"]');
                const formFields = form?.querySelectorAll('input, textarea, select');
                
                if (submitButton) {
                    submitButton.disabled = false;
                    submitButton.textContent = 'Post Task';
                }
                if (formFields) {
                    formFields.forEach(field => field.disabled = false);
                }
                
                alert('Login state fixed! You should now be able to post tasks.');
            } else {
                alert('No user logged in. Please log in first.');
            }
        }



        // Inline click handler for the Post Task button
        function handlePostTaskClick(event) {
            event.preventDefault();
            
            const form = document.getElementById('post-task-form');
            if (form && window.app) {
                window.app.handlePostTask(form);
            }
        }

        // Immediate fix for login state - run as soon as possible
        (function() {
            const currentUser = localStorage.getItem('getitdone_current_user');
            
            if (currentUser) {
                // User is logged in - immediately hide disclaimer
                const loginPrompt = document.getElementById('login-prompt-section');
                const userInfo = document.getElementById('user-info-section');
                const overlay = document.getElementById('login-overlay');
                
                if (loginPrompt) {
                    loginPrompt.style.display = 'none';
                }
                if (userInfo) {
                    userInfo.style.display = 'block';
                }
                if (overlay) {
                    overlay.style.display = 'none';
                }
            }
        })();

        // Set minimum date to today and initialize location form
        document.addEventListener('DOMContentLoaded', () => {
            const dateInput = document.getElementById('task-date');
            if (dateInput) {
                const today = new Date().toISOString().split('T')[0];
                dateInput.min = today;
            }

            // Add event listeners for payment calculation
            const payAmountInput = document.getElementById('pay-amount');
            const paymentMethodSelect = document.getElementById('payment-method');
            
            if (payAmountInput) {
                payAmountInput.addEventListener('input', updatePaymentBreakdown);
                payAmountInput.addEventListener('change', updatePaymentBreakdown);
            }
            
            if (paymentMethodSelect) {
                paymentMethodSelect.addEventListener('change', updatePaymentBreakdown);
            }

            // Add card input formatting for online payment
            const paymentCardNumber = document.getElementById('payment-card-number');
            if (paymentCardNumber) {
                paymentCardNumber.addEventListener('input', function() {
                    let value = this.value.replace(/\s/g, '').replace(/[^0-9]/gi, '');
                    let formattedValue = value.match(/.{1,4}/g)?.join(' ') || value;
                    if (formattedValue !== this.value) {
                        this.value = formattedValue;
                    }
                });
            }

            const paymentCardExpiry = document.getElementById('payment-card-expiry');
            if (paymentCardExpiry) {
                paymentCardExpiry.addEventListener('input', function() {
                    let value = this.value.replace(/\D/g, '');
                    if (value.length >= 2) {
                        value = value.substring(0, 2) + '/' + value.substring(2, 4);
                    }
                    this.value = value;
                });
            }

            const paymentCardCvv = document.getElementById('payment-card-cvv');
            if (paymentCardCvv) {
                paymentCardCvv.addEventListener('input', function() {
                    this.value = this.value.replace(/[^0-9]/g, '');
                });
            }

            // Initialize location form
            initializeLocationForm();
            
            // Initialize address autocomplete
            initializeAddressAutocomplete();
        });

        function initializeLocationForm() {
            const collegeSelect = document.getElementById('college');
            const collegeRemoteSelect = document.getElementById('college-remote');
            const jobTypeRadios = document.querySelectorAll('input[name="jobType"]');
            const localDetails = document.getElementById('local-location-details');
            const remoteDetails = document.getElementById('remote-location-details');

            // Populate college dropdowns
            const colleges = [
                "University of Alabama - Tuscaloosa",
                "Auburn University - Auburn",
                "University of Alabama at Birmingham - Birmingham",
                "University of South Alabama - Mobile",
                "Troy University - Troy",
                "Jacksonville State University - Jacksonville",
                "University of North Alabama - Florence",
                "Alabama State University - Montgomery",
                "University of California - Los Angeles",
                "University of California - Berkeley",
                "Stanford University - Stanford",
                "University of Southern California - Los Angeles",
                "University of Texas - Austin",
                "Texas A&M University - College Station",
                "University of Florida - Gainesville",
                "Florida State University - Tallahassee",
                "University of Georgia - Athens",
                "Georgia Institute of Technology - Atlanta",
                "University of North Carolina - Chapel Hill",
                "Duke University - Durham",
                "North Carolina State University - Raleigh",
                "University of Virginia - Charlottesville",
                "Virginia Tech - Blacksburg",
                "University of Michigan - Ann Arbor",
                "Michigan State University - East Lansing",
                "Ohio State University - Columbus",
                "University of Illinois - Urbana-Champaign",
                "Northwestern University - Evanston",
                "University of Wisconsin - Madison",
                "University of Minnesota - Twin Cities",
                "University of Washington - Seattle",
                "University of Oregon - Eugene",
                "Oregon State University - Corvallis",
                "University of Colorado - Boulder",
                "Colorado State University - Fort Collins",
                "Arizona State University - Tempe",
                "University of Arizona - Tucson",
                "University of Utah - Salt Lake City",
                "Brigham Young University - Provo",
                "University of Nevada - Las Vegas",
                "University of New Mexico - Albuquerque",
                "Texas Tech University - Lubbock",
                "University of Houston - Houston",
                "Rice University - Houston",
                "Baylor University - Waco",
                "University of Oklahoma - Norman",
                "Oklahoma State University - Stillwater",
                "University of Kansas - Lawrence",
                "Kansas State University - Manhattan",
                "University of Missouri - Columbia",
                "Washington University in St. Louis - St. Louis",
                "University of Iowa - Iowa City",
                "Iowa State University - Ames",
                "University of Nebraska - Lincoln",
                "University of Arkansas - Fayetteville",
                "University of Tennessee - Knoxville",
                "Vanderbilt University - Nashville",
                "University of Kentucky - Lexington",
                "University of Louisville - Louisville",
                "West Virginia University - Morgantown",
                "University of Maryland - College Park",
                "Johns Hopkins University - Baltimore",
                "University of Delaware - Newark",
                "Rutgers University - New Brunswick",
                "Princeton University - Princeton",
                "University of Pennsylvania - Philadelphia",
                "Temple University - Philadelphia",
                "Penn State University - University Park",
                "Carnegie Mellon University - Pittsburgh",
                "University of Pittsburgh - Pittsburgh",
                "Syracuse University - Syracuse",
                "Cornell University - Ithaca",
                "University of Rochester - Rochester",
                "New York University - New York",
                "Columbia University - New York",
                "Yale University - New Haven",
                "University of Connecticut - Storrs",
                "Boston University - Boston",
                "Harvard University - Cambridge",
                "MIT - Cambridge",
                "Northeastern University - Boston",
                "University of Massachusetts - Amherst",
                "University of Vermont - Burlington",
                "University of New Hampshire - Durham",
                "University of Maine - Orono",
                "University of Rhode Island - Kingston",
                "Brown University - Providence"
            ];
            
            if (collegeSelect) {
                colleges.forEach(college => {
                    const option = document.createElement('option');
                    option.value = college;
                    option.textContent = college;
                    collegeSelect.appendChild(option);
                });
            }
            
            if (collegeRemoteSelect) {
                colleges.forEach(college => {
                    const option = document.createElement('option');
                    option.value = college;
                    option.textContent = college;
                    collegeRemoteSelect.appendChild(option);
                });
            }

            // Handle job type change
            jobTypeRadios.forEach(radio => {
                radio.addEventListener('change', () => {
                    if (radio.value === 'local') {
                        localDetails.style.display = 'block';
                        remoteDetails.style.display = 'none';
                        // Set required attributes for local job fields
                        document.getElementById('location-type').required = true;
                        document.getElementById('location-name').required = true;
                        document.getElementById('address').required = true;
                        document.getElementById('remote-location-type').required = false;
                        document.getElementById('remote-location-name').required = false;
                        document.getElementById('address-remote').required = false;
                    } else if (radio.value === 'remote') {
                        localDetails.style.display = 'none';
                        remoteDetails.style.display = 'block';
                        // Set required attributes for remote job fields
                        document.getElementById('location-type').required = false;
                        document.getElementById('location-name').required = false;
                        document.getElementById('address').required = false;
                        document.getElementById('remote-location-type').required = true;
                        document.getElementById('remote-location-name').required = true;
                        document.getElementById('address-remote').required = false;
                    }
                });
            });
        }

        function initializeAddressAutocomplete() {
            const addressInput = document.getElementById('address');
            const suggestionsContainer = document.getElementById('address-suggestions');
            
            if (!addressInput || !suggestionsContainer) return;

            let debounceTimer;
            let currentSuggestions = [];

            // Sample address data for demonstration
            const sampleAddresses = [
                "123 University Blvd, Tuscaloosa, AL 35401",
                "456 Lakeside Dr, Tuscaloosa, AL 35401",
                "789 University Blvd, Tuscaloosa, AL 35401",
                "321 Campus View Dr, Tuscaloosa, AL 35401",
                "555 Student Center, Tuscaloosa, AL 35401",
                "1000 University Library, Tuscaloosa, AL 35401",
                "2000 Riverside Dr, Tuscaloosa, AL 35401",
                "3000 Lakeside Dr, Tuscaloosa, AL 35401",
                "4000 Campus View Dr, Tuscaloosa, AL 35401",
                "5000 University Blvd, Tuscaloosa, AL 35401"
            ];

            addressInput.addEventListener('input', (e) => {
                const query = e.target.value.trim();
                
                clearTimeout(debounceTimer);
                
                if (query.length < 2) {
                    hideSuggestions();
                    return;
                }

                debounceTimer = setTimeout(() => {
                    showAddressSuggestions(query);
                }, 300);
            });

            addressInput.addEventListener('blur', () => {
                // Delay hiding to allow clicking on suggestions
                setTimeout(() => {
                    hideSuggestions();
                }, 200);
            });

            addressInput.addEventListener('focus', () => {
                if (addressInput.value.trim().length >= 2) {
                    showAddressSuggestions(addressInput.value.trim());
                }
            });

            function showAddressSuggestions(query) {
                const filteredAddresses = sampleAddresses.filter(addr => 
                    addr.toLowerCase().includes(query.toLowerCase())
                );

                if (filteredAddresses.length === 0) {
                    hideSuggestions();
                    return;
                }

                currentSuggestions = filteredAddresses;
                displaySuggestions(filteredAddresses);
            }

            function displaySuggestions(addresses) {
                suggestionsContainer.innerHTML = '';
                
                addresses.forEach((address, index) => {
                    const suggestion = document.createElement('div');
                    suggestion.className = 'address-suggestion';
                    suggestion.textContent = address;
                    suggestion.addEventListener('click', () => {
                        addressInput.value = address;
                        hideSuggestions();
                    });
                    suggestionsContainer.appendChild(suggestion);
                });

                suggestionsContainer.style.display = 'block';
            }

            function hideSuggestions() {
                suggestionsContainer.style.display = 'none';
                currentSuggestions = [];
            }

            // Handle keyboard navigation
            addressInput.addEventListener('keydown', (e) => {
                const suggestions = suggestionsContainer.querySelectorAll('.address-suggestion');
                const activeSuggestion = suggestionsContainer.querySelector('.address-suggestion.active');
                
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    if (activeSuggestion) {
                        activeSuggestion.classList.remove('active');
                        const next = activeSuggestion.nextElementSibling;
                        if (next) {
                            next.classList.add('active');
                        } else {
                            suggestions[0]?.classList.add('active');
                        }
                    } else {
                        suggestions[0]?.classList.add('active');
                    }
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    if (activeSuggestion) {
                        activeSuggestion.classList.remove('active');
                        const prev = activeSuggestion.previousElementSibling;
                        if (prev) {
                            prev.classList.add('active');
                        } else {
                            suggestions[suggestions.length - 1]?.classList.add('active');
                        }
                    } else {
                        suggestions[suggestions.length - 1]?.classList.add('active');
                    }
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    if (activeSuggestion) {
                        addressInput.value = activeSuggestion.textContent;
                        hideSuggestions();
                    }
                } else if (e.key === 'Escape') {
                    hideSuggestions();
                }
            });
        }
    </script>

    <!-- Login Modal -->
    <div class="modal fade" id="login-modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Log In</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="login-form">
                        <div class="mb-3">
                            <label for="login-email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="login-email" name="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="login-password" class="form-label">Password</label>
                            <input type="password" class="form-control" id="login-password" name="password" required>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">Log In</button>
                        </div>
                    </form>
                    <div class="text-center mt-3">
                        <p class="mb-0">Don't have an account? <a href="#" onclick="showRegisterModal()">Sign up</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal fade" id="register-modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Sign Up</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="register-form">
                        <div class="mb-3">
                            <label for="register-name" class="form-label">Full Name *</label>
                            <input type="text" class="form-control" id="register-name" name="name" required>
                        </div>
                        <div class="mb-3">
                            <label for="register-email" class="form-label">Email *</label>
                            <input type="email" class="form-control" id="register-email" name="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="register-phone" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="register-phone" name="phone">
                        </div>
                        <div class="mb-3">
                            <label for="register-password" class="form-label">Password *</label>
                            <input type="password" class="form-control" id="register-password" name="password" required minlength="6">
                            <div class="form-text">Password must be at least 6 characters long.</div>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">Sign Up</button>
                        </div>
                    </form>
                    <div class="text-center mt-3">
                        <p class="mb-0">Already have an account? <a href="#" onclick="showLoginModal()">Log in</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Modal -->
    <div class="modal fade" id="notifications-modal" tabindex="-1" aria-labelledby="notificationsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="notificationsModalLabel">Notifications</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="notifications-modal-list">
                        <div class="text-center text-muted py-3">No notifications</div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-outline-secondary" onclick="markAllNotificationsRead()">Mark all as read</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Messages Modal -->
    <div class="modal fade" id="messages-modal" tabindex="-1" aria-labelledby="messagesModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="messagesModalLabel">Messages</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="list-group" id="conversations-list-modal">
                                <div class="text-center text-muted py-3">No conversations</div>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div id="messages-content" style="display: none;">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h6 id="conversation-title">Select a conversation</h6>
                                </div>
                                <div class="messages-container border rounded p-3 mb-3" style="height: 300px; overflow-y: auto;" id="messages-container-modal">
                                    <div class="text-center text-muted">Select a conversation to view messages</div>
                                </div>
                                <form id="message-form-modal">
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Type your message..." id="message-input-modal">
                                        <button class="btn btn-primary" type="submit">Send</button>
                                    </div>
                                </form>
                            </div>
                            <div id="no-conversation-selected" class="text-center text-muted py-5">
                                <i class="bi bi-chat-dots fs-1"></i>
                                <p>Select a conversation to start messaging</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>
</html>

